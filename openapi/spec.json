{
  "openapi": "3.1.0",
  "info": {
    "title": "Frank Bot",
    "description": "Sean's personal assistant API. Access calendar, contacts, SMS, Swarm, Telegram via scripts. Control Android phone, run autonomous tasks (jorbs), and chat with Claudia about code.",
    "version": "0.6.0"
  },
  "servers": [{"url": "http://localhost:8000"}],
  "paths": {
    "/frank/script/api/learn": {
      "get": {
        "operationId": "frankScriptApiLearn",
        "summary": "Learn scripting capabilities (CALL FIRST)",
        "description": "Returns comprehensive FrankAPI docs. Scripts access: frank.calendar (events, create), frank.contacts (search), frank.sms (send), frank.swarm (checkins), frank.telegram (send, messages, chats), frank.ups (status), frank.time (now). Call this FIRST to learn what scripts can do.",
        "responses": {"200": {"description": "FrankAPI documentation", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/FrankScriptApiLearnResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/frank/script/task/start": {
      "post": {
        "operationId": "frankScriptTaskStart",
        "summary": "Execute a script (async)",
        "description": "Start script execution. Returns task_id immediately. Poll frankScriptTaskStatus for results. Provide script_id OR slug+code. Scripts can call frank.calendar.events(), frank.sms.send(), etc.",
        "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/FrankScriptTaskStartRequest"}}}},
        "responses": {"200": {"description": "Task started", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/FrankScriptTaskStartResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/frank/script/task/status": {
      "get": {
        "operationId": "frankScriptTaskStatus",
        "summary": "Get script task status/result",
        "parameters": [{"in": "query", "name": "task_id", "required": true, "schema": {"type": "string"}}],
        "responses": {"200": {"description": "Task details", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/FrankScriptTaskStatusResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/frank/script/task/list": {
      "get": {
        "operationId": "frankScriptTaskList",
        "summary": "List recent script tasks",
        "parameters": [
          {"in": "query", "name": "status", "schema": {"type": "string", "enum": ["pending", "running", "completed", "failed", "timeout"]}},
          {"in": "query", "name": "limit", "schema": {"type": "integer", "default": 20}}
        ],
        "responses": {"200": {"description": "Task list", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/FrankScriptTaskListResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/frank/script/task/cancel": {
      "get": {
        "operationId": "frankScriptTaskCancel",
        "summary": "Cancel a script task",
        "parameters": [{"in": "query", "name": "task_id", "required": true, "schema": {"type": "string"}}],
        "responses": {"200": {"description": "Cancellation result", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/FrankScriptTaskCancelResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/api/learn": {
      "get": {
        "operationId": "androidPhoneApiLearn",
        "summary": "Learn Android phone capabilities (CALL FIRST)",
        "description": "Returns everything the phone can do: thermostat, smart home, Uber/Lyft, DoorDash, device maintenance, browser. Call FIRST before using TaskDo.",
        "responses": {"200": {"description": "Android capabilities docs", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AndroidPhoneApiLearnResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/task/do": {
      "get": {
        "operationId": "androidPhoneTaskDo",
        "summary": "Start Android task (async)",
        "description": "Start a phone task. Returns task_id immediately. Poll with androidPhoneTaskGet.",
        "parameters": [
          {"in": "query", "name": "goal", "required": true, "schema": {"type": "string"}, "description": "Natural language goal"},
          {"in": "query", "name": "app", "schema": {"type": "string"}, "description": "Optional app to launch"}
        ],
        "responses": {"200": {"description": "Task started", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AndroidPhoneTaskCreateResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/task/get": {
      "get": {
        "operationId": "androidPhoneTaskGet",
        "summary": "Get Android task status/result",
        "parameters": [{"in": "query", "name": "task_id", "required": true, "schema": {"type": "string"}}],
        "responses": {"200": {"description": "Task details", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AndroidPhoneTaskResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/task/list": {
      "get": {
        "operationId": "androidPhoneTaskList",
        "summary": "List Android tasks",
        "parameters": [
          {"in": "query", "name": "status", "schema": {"type": "string"}},
          {"in": "query", "name": "limit", "schema": {"type": "integer", "default": 20}}
        ],
        "responses": {"200": {"description": "Task list", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AndroidPhoneTaskListResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/task/cancel": {
      "get": {
        "operationId": "androidPhoneTaskCancel",
        "summary": "Cancel Android task",
        "parameters": [{"in": "query", "name": "task_id", "required": true, "schema": {"type": "string"}}],
        "responses": {"200": {"description": "Task after cancellation", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AndroidPhoneTaskResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/jorbs/api/learn": {
      "get": {
        "operationId": "jorbsApiLearn",
        "summary": "Learn Jorbs system (CALL FIRST)",
        "description": "Returns comprehensive docs about autonomous tasks (jorbs). Learn lifecycle, contacts format, personalities, auto-pause rules.",
        "responses": {"200": {"description": "Jorbs documentation", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/JorbsApiLearnResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/jorbs/create": {
      "get": {
        "operationId": "jorbCreate",
        "summary": "Create autonomous task",
        "description": "Start a jorb with name, plan, contacts array. Frank executes via SMS/Telegram, pauses for approval on spending.",
        "parameters": [
          {"in": "query", "name": "name", "required": true, "schema": {"type": "string"}},
          {"in": "query", "name": "plan", "required": true, "schema": {"type": "string"}},
          {"in": "query", "name": "contacts", "schema": {"type": "string"}, "description": "JSON array: [{identifier, channel, name}]"},
          {"in": "query", "name": "personality", "schema": {"type": "string", "default": "default"}},
          {"in": "query", "name": "start_immediately", "schema": {"type": "boolean", "default": true}}
        ],
        "responses": {"200": {"description": "Created jorb", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/CreateJorbResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/jorbs/{id}/get": {
      "get": {
        "operationId": "jorbGet",
        "summary": "Get jorb details",
        "parameters": [
          {"in": "path", "name": "id", "required": true, "schema": {"type": "string"}},
          {"in": "query", "name": "include_messages", "schema": {"type": "boolean", "default": false}}
        ],
        "responses": {"200": {"description": "Jorb details", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/JorbDetailsResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/jorbs/brief": {
      "get": {
        "operationId": "jorbsBrief",
        "summary": "Get jorbs overview + pending decisions",
        "description": "Quick briefing on all jorb activity. Shows pending approvals, recent completions, activity summary.",
        "responses": {"200": {"description": "Briefing", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/JorbsBriefResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/jorbs/{id}/approve": {
      "get": {
        "operationId": "jorbApprove",
        "summary": "Approve/reject jorb action",
        "parameters": [
          {"in": "path", "name": "id", "required": true, "schema": {"type": "string"}},
          {"in": "query", "name": "decision", "required": true, "schema": {"type": "string", "enum": ["approve", "reject"]}},
          {"in": "query", "name": "note", "schema": {"type": "string"}}
        ],
        "responses": {"200": {"description": "Updated jorb", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/JorbApproveResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/jorbs/{id}/cancel": {
      "get": {
        "operationId": "jorbCancel",
        "summary": "Cancel a jorb",
        "parameters": [
          {"in": "path", "name": "id", "required": true, "schema": {"type": "string"}},
          {"in": "query", "name": "reason", "schema": {"type": "string"}}
        ],
        "responses": {"200": {"description": "Cancelled jorb", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/JorbCancelResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/api/learn": {
      "get": {
        "operationId": "claudiaApiLearn",
        "summary": "Learn Claudia coding assistant (CALL FIRST)",
        "description": "Returns docs about chatting with Claudia for coding. Learn workflow: create chat, discuss, end, execute prompt.",
        "responses": {"200": {"description": "Claudia documentation", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ClaudiaApiLearnResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/chat/create": {
      "get": {
        "operationId": "claudiaChatCreate",
        "summary": "Start chat with Claudia",
        "parameters": [
          {"in": "query", "name": "repo_name", "required": true, "schema": {"type": "string"}},
          {"in": "query", "name": "title", "required": true, "schema": {"type": "string"}},
          {"in": "query", "name": "message", "schema": {"type": "string"}}
        ],
        "responses": {"200": {"description": "Chat created", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ClaudiaChatCreateResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/repos/{repo_id}/chats/{chat_id}": {
      "get": {
        "operationId": "claudiaChatGet",
        "summary": "Get chat with messages",
        "parameters": [
          {"in": "path", "name": "repo_id", "required": true, "schema": {"type": "string"}},
          {"in": "path", "name": "chat_id", "required": true, "schema": {"type": "string"}}
        ],
        "responses": {"200": {"description": "Chat details", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ClaudiaChatGetResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/repos/{repo_id}/chats/{chat_id}/message": {
      "get": {
        "operationId": "claudiaChatMessage",
        "summary": "Send message in chat",
        "parameters": [
          {"in": "path", "name": "repo_id", "required": true, "schema": {"type": "string"}},
          {"in": "path", "name": "chat_id", "required": true, "schema": {"type": "string"}},
          {"in": "query", "name": "message", "required": true, "schema": {"type": "string"}}
        ],
        "responses": {"200": {"description": "Message sent", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ClaudiaChatMessageResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/repos/{repo_id}/prompts/{prompt_id}/execute": {
      "get": {
        "operationId": "claudiaPromptExecute",
        "summary": "Execute a prompt",
        "parameters": [
          {"in": "path", "name": "repo_id", "required": true, "schema": {"type": "string"}},
          {"in": "path", "name": "prompt_id", "required": true, "schema": {"type": "string"}}
        ],
        "responses": {"200": {"description": "Execution queued", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ClaudiaPromptExecuteResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/executions/{execution_id}": {
      "get": {
        "operationId": "claudiaExecutionGet",
        "summary": "Get execution result",
        "parameters": [{"in": "path", "name": "execution_id", "required": true, "schema": {"type": "string"}}],
        "responses": {"200": {"description": "Execution details", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ClaudiaExecutionGetResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/diagnostics": {
      "get": {
        "operationId": "getDiagnostics",
        "summary": "Get API diagnostics",
        "description": "Health check, error counts, recent endpoint stats.",
        "responses": {"200": {"description": "Diagnostics", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DiagnosticsResponse"}}}}},
        "security": [{"ActionsApiKey": []}]
      }
    }
  },
  "components": {
    "schemas": {
      "FrankScriptApiLearnResponse": {
        "type": "object",
        "description": "Comprehensive FrankAPI documentation for script development.",
        "properties": {
          "overview": {"type": "string"},
          "quick_start": {"type": "string"},
          "namespaces": {"type": "object", "description": "frank.calendar, frank.contacts, frank.sms, frank.swarm, frank.telegram, frank.ups, frank.time"},
          "example_scripts": {"type": "array", "items": {"type": "object"}},
          "execution_workflow": {"type": "array", "items": {"type": "string"}},
          "tips": {"type": "array", "items": {"type": "string"}}
        }
      },
      "FrankScriptTaskStartRequest": {
        "type": "object",
        "properties": {
          "script_id": {"type": "string", "description": "ID of existing script"},
          "slug": {"type": "string", "description": "Slug for new script (use with code)"},
          "code": {"type": "string", "description": "Python code (use with slug)"},
          "params": {"type": "object", "description": "Parameters for main()"},
          "timeout": {"type": "integer", "default": 600}
        }
      },
      "FrankScriptTaskStartResponse": {
        "type": "object",
        "properties": {
          "task_id": {"type": "string"},
          "status": {"type": "string"},
          "script_id": {"type": "string"},
          "message": {"type": "string"}
        },
        "required": ["task_id", "status", "script_id"]
      },
      "FrankScriptTaskStatusResponse": {
        "type": "object",
        "properties": {
          "job_id": {"type": "string"},
          "script_id": {"type": "string"},
          "status": {"type": "string", "enum": ["pending", "running", "completed", "failed", "timeout"]},
          "params": {"type": "object"},
          "started_at": {"type": "string"},
          "completed_at": {"type": "string"},
          "stdout": {"type": "string"},
          "stderr": {"type": "string"},
          "result": {"description": "Return value from main()"},
          "error": {"type": "string"}
        },
        "required": ["job_id", "script_id", "status"]
      },
      "FrankScriptTaskListResponse": {
        "type": "object",
        "properties": {
          "count": {"type": "integer"},
          "tasks": {"type": "array", "items": {"type": "object"}}
        }
      },
      "FrankScriptTaskCancelResponse": {
        "type": "object",
        "properties": {
          "task_id": {"type": "string"},
          "status": {"type": "string"},
          "message": {"type": "string"}
        }
      },
      "AndroidPhoneApiLearnResponse": {
        "type": "object",
        "description": "Comprehensive Android phone capabilities.",
        "properties": {
          "overview": {"type": "string"},
          "capabilities": {"type": "object"},
          "examples": {"type": "array", "items": {"type": "string"}},
          "safety_rules": {"type": "array", "items": {"type": "string"}}
        }
      },
      "AndroidPhoneTaskCreateResponse": {
        "type": "object",
        "properties": {
          "task_id": {"type": "string"},
          "status": {"type": "string"},
          "goal": {"type": "string"},
          "message": {"type": "string"}
        }
      },
      "AndroidPhoneTaskResponse": {
        "type": "object",
        "properties": {
          "task_id": {"type": "string"},
          "status": {"type": "string"},
          "goal": {"type": "string"},
          "result": {"type": "string"},
          "extracted_data": {"type": "object"},
          "steps_taken": {"type": "integer"},
          "error": {"type": "string"}
        }
      },
      "AndroidPhoneTaskListResponse": {
        "type": "object",
        "properties": {
          "count": {"type": "integer"},
          "tasks": {"type": "array", "items": {"type": "object"}}
        }
      },
      "JorbsApiLearnResponse": {
        "type": "object",
        "description": "Comprehensive jorbs documentation.",
        "properties": {
          "overview": {"type": "string"},
          "lifecycle": {"type": "object"},
          "create_jorb": {"type": "object"},
          "personalities": {"type": "object"},
          "auto_pause_rules": {"type": "array", "items": {"type": "string"}},
          "operations": {"type": "object"},
          "example_plan": {"type": "string"}
        }
      },
      "CreateJorbResponse": {
        "type": "object",
        "properties": {
          "jorb_id": {"type": "string"},
          "name": {"type": "string"},
          "status": {"type": "string"},
          "plan": {"type": "string"},
          "contacts": {"type": "array", "items": {"type": "object"}},
          "kickoff": {"type": "object"}
        }
      },
      "JorbDetailsResponse": {
        "type": "object",
        "properties": {
          "jorb_id": {"type": "string"},
          "name": {"type": "string"},
          "status": {"type": "string"},
          "plan": {"type": "string"},
          "progress_summary": {"type": "string"},
          "paused_reason": {"type": "string"},
          "needs_approval_for": {"type": "string"},
          "messages": {"type": "array", "items": {"type": "object"}}
        }
      },
      "JorbsBriefResponse": {
        "type": "object",
        "properties": {
          "needs_attention": {"type": "integer"},
          "activity_summary": {"type": "string"},
          "pending_decisions": {"type": "array", "items": {"type": "object"}},
          "total_open_jorbs": {"type": "integer"}
        }
      },
      "JorbApproveResponse": {
        "type": "object",
        "properties": {
          "jorb_id": {"type": "string"},
          "status": {"type": "string"},
          "message": {"type": "string"}
        }
      },
      "JorbCancelResponse": {
        "type": "object",
        "properties": {
          "jorb_id": {"type": "string"},
          "status": {"type": "string"},
          "message": {"type": "string"}
        }
      },
      "ClaudiaApiLearnResponse": {
        "type": "object",
        "description": "Claudia coding assistant documentation.",
        "properties": {
          "overview": {"type": "string"},
          "workflow": {"type": "array", "items": {"type": "string"}},
          "operations": {"type": "object"},
          "available_repos": {"type": "array", "items": {"type": "object"}},
          "tips": {"type": "array", "items": {"type": "string"}}
        }
      },
      "ClaudiaChatCreateResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "repo": {"type": "object"},
          "chat": {"type": "object"}
        }
      },
      "ClaudiaChatGetResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "chat": {"type": "object"}
        }
      },
      "ClaudiaChatMessageResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "chat_message": {"type": "object"}
        }
      },
      "ClaudiaPromptExecuteResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "queue_item_id": {"type": "string"},
          "queue_position": {"type": "integer"}
        }
      },
      "ClaudiaExecutionGetResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "execution": {"type": "object"}
        }
      },
      "DiagnosticsResponse": {
        "type": "object",
        "properties": {
          "status": {"type": "string"},
          "uptime": {"type": "string"},
          "endpoints": {"type": "object"}
        }
      }
    },
    "securitySchemes": {
      "ActionsApiKey": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-Key"
      }
    }
  }
}
