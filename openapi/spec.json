{
  "openapi": "3.1.0",
  "info": {
    "title": "Frank Bot",
    "version": "0.5.0",
    "description": "Personal assistant for Google Calendar, Contacts, and Swarm location history."
  },
  "servers": [
    {
      "url": "http://localhost:8000"
    }
  ],
  "paths": {
    "/actions/hello": {
      "get": {
        "operationId": "sayHello",
        "summary": "Quick greeting",
        "parameters": [
          {
            "in": "query",
            "name": "name",
            "schema": {
              "type": "string"
            },
            "required": false,
            "description": "Optional name to include in the greeting."
          }
        ],
        "responses": {
          "200": {
            "description": "Greeting response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HelloWorldResponse"
                }
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/calendar/events": {
      "get": {
        "operationId": "getEvents",
        "summary": "List upcoming calendar events (read-only)",
        "parameters": [
          {
            "in": "query",
            "name": "day",
            "schema": {"type": "string"},
            "required": false,
            "description": "ISO date (YYYY-MM-DD) to list events for that day."
          },
          {
            "in": "query",
            "name": "time_min",
            "schema": {"type": "string"},
            "required": false,
            "description": "Lower bound (inclusive) in RFC3339/ISO8601 format."
          },
          {
            "in": "query",
            "name": "time_max",
            "schema": {"type": "string"},
            "required": false,
            "description": "Upper bound (exclusive) in RFC3339/ISO8601 format."
          },
          {
            "in": "query",
            "name": "max_results",
            "schema": {"type": "integer"},
            "required": false,
            "description": "Maximum events to return (1-50)."
          },
          {
            "in": "query",
            "name": "time_zone",
            "schema": {"type": "string"},
            "required": false,
            "description": "IANA timezone name."
          },
          {
            "in": "query",
            "name": "calendar_id",
            "schema": {"type": "string"},
            "required": false,
            "description": "Specific calendar ID."
          },
          {
            "in": "query",
            "name": "calendar_name",
            "schema": {"type": "string"},
            "required": false,
            "description": "Display name to resolve a calendar."
          }
        ],
        "responses": {
          "200": {
            "description": "List of calendar events.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ListCalendarEventsResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/calendar/schedule": {
      "get": {
        "operationId": "scheduleTime",
        "summary": "Add a time block to your calendar",
        "parameters": [
          {
            "in": "query",
            "name": "summary",
            "schema": {"type": "string"},
            "required": true,
            "description": "Title for the calendar entry."
          },
          {
            "in": "query",
            "name": "start",
            "schema": {"type": "string"},
            "required": true,
            "description": "Start time in ISO8601 format."
          },
          {
            "in": "query",
            "name": "end",
            "schema": {"type": "string"},
            "required": true,
            "description": "End time in ISO8601 format."
          },
          {
            "in": "query",
            "name": "description",
            "schema": {"type": "string"},
            "required": false,
            "description": "Optional notes or description."
          },
          {
            "in": "query",
            "name": "location",
            "schema": {"type": "string"},
            "required": false,
            "description": "Location or address for the event (e.g., 'Nerdvana, Frisco, TX' or '123 Main St')."
          },
          {
            "in": "query",
            "name": "attendees",
            "schema": {"type": "string"},
            "required": false,
            "description": "Comma-separated email addresses for attendees."
          },
          {
            "in": "query",
            "name": "time_zone",
            "schema": {"type": "string"},
            "required": false,
            "description": "IANA timezone (defaults to your location)."
          },
          {
            "in": "query",
            "name": "calendar_id",
            "schema": {"type": "string"},
            "required": false,
            "description": "Specific calendar ID."
          },
          {
            "in": "query",
            "name": "calendar_name",
            "schema": {"type": "string"},
            "required": false,
            "description": "Calendar name to use."
          }
        ],
        "responses": {
          "200": {
            "description": "Calendar entry details.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/CreateCalendarEventResponse"}
              }
            }
          },
          "400": {
            "description": "Invalid request.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/calendar/calendars": {
      "get": {
        "operationId": "getCalendars",
        "summary": "List available calendars (read-only)",
        "parameters": [
          {
            "in": "query",
            "name": "include_access_role",
            "schema": {"type": "boolean"},
            "required": false,
            "description": "Include accessRole metadata when true."
          },
          {
            "in": "query",
            "name": "primary_only",
            "schema": {"type": "boolean"},
            "required": false,
            "description": "Return only the primary calendar when true."
          }
        ],
        "responses": {
          "200": {
            "description": "List of calendars.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ListCalendarsResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/contacts/search": {
      "get": {
        "operationId": "searchContacts",
        "summary": "Search Google Contacts (read-only)",
        "parameters": [
          {
            "in": "query",
            "name": "query",
            "schema": {"type": "string"},
            "required": true,
            "description": "Search text (names, emails, or phone numbers)."
          },
          {
            "in": "query",
            "name": "max_results",
            "schema": {"type": "integer"},
            "required": false,
            "description": "Maximum results to return."
          }
        ],
        "responses": {
          "200": {
            "description": "Search results.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/SearchContactsResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/sms/send": {
      "get": {
        "operationId": "sendSMS",
        "summary": "Send an SMS text message to a contact",
        "description": "Send a text message to someone in your Google Contacts by name, or directly to a phone number. Messages are sent from your Telnyx phone number.",
        "parameters": [
          {
            "in": "query",
            "name": "recipient",
            "schema": {"type": "string"},
            "required": true,
            "description": "Contact name to look up in Google Contacts, or a phone number directly."
          },
          {
            "in": "query",
            "name": "message",
            "schema": {"type": "string"},
            "required": true,
            "description": "The text message content to send."
          }
        ],
        "responses": {
          "200": {
            "description": "SMS sent successfully.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/SendSMSResponse"}
              }
            }
          },
          "400": {
            "description": "Invalid request or SMS failed.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/sms/messages": {
      "get": {
        "operationId": "getSmsMessages",
        "summary": "Get recent SMS messages (read-only)",
        "description": "Retrieve recent SMS/MMS messages. Messages can be filtered by contact name, phone number, or direction.",
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "schema": {"type": "integer"},
            "required": false,
            "description": "Maximum number of messages to return (default 50, max 100)."
          },
          {
            "in": "query",
            "name": "contact",
            "schema": {"type": "string"},
            "required": false,
            "description": "Filter by contact name (case-insensitive partial match)."
          },
          {
            "in": "query",
            "name": "phone",
            "schema": {"type": "string"},
            "required": false,
            "description": "Filter by phone number."
          },
          {
            "in": "query",
            "name": "direction",
            "schema": {"type": "string", "enum": ["inbound", "outbound"]},
            "required": false,
            "description": "Filter by message direction."
          }
        ],
        "responses": {
          "200": {
            "description": "List of SMS messages.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/GetSmsMessagesResponse"}
              }
            }
          },
          "400": {
            "description": "Invalid request parameters.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/swarm/checkins": {
      "get": {
        "operationId": "searchCheckins",
        "summary": "List your Swarm check-ins with filtering (read-only). Use to answer 'What restaurant did Jimmy and I go to in 2024?' or 'Show check-ins with Linda'.",
        "parameters": [
          {
            "in": "query",
            "name": "max_results",
            "schema": {"type": "integer"},
            "required": false,
            "description": "Number of check-ins to return (default 10, max 250)."
          },
          {
            "in": "query",
            "name": "year",
            "schema": {"type": "integer"},
            "required": false,
            "description": "Filter to check-ins from a specific year (e.g., 2024)."
          },
          {
            "in": "query",
            "name": "after_date",
            "schema": {"type": "string"},
            "required": false,
            "description": "Filter to check-ins after this date (YYYY-MM-DD)."
          },
          {
            "in": "query",
            "name": "before_date",
            "schema": {"type": "string"},
            "required": false,
            "description": "Filter to check-ins before this date (YYYY-MM-DD)."
          },
          {
            "in": "query",
            "name": "with_companion",
            "schema": {"type": "string"},
            "required": false,
            "description": "Filter to check-ins with this person (name). Comma-separate for multiple (e.g., 'lauren, ekaterina'). Uses fuzzy matching for typos."
          },
          {
            "in": "query",
            "name": "companion_match",
            "schema": {"type": "string", "enum": ["any", "all"]},
            "required": false,
            "description": "'any' (default) = OR, matches if ANY companion present; 'all' = AND, requires ALL companions."
          },
          {
            "in": "query",
            "name": "only_with_companions",
            "schema": {"type": "boolean"},
            "required": false,
            "description": "If true, only return check-ins where you were with someone."
          },
          {
            "in": "query",
            "name": "category",
            "schema": {"type": "string"},
            "required": false,
            "description": "Filter by venue category (e.g., 'restaurant', 'coffee', 'bar')."
          },
          {
            "in": "query",
            "name": "has_photos",
            "schema": {"type": "boolean"},
            "required": false,
            "description": "If true, only return check-ins that have photos."
          },
          {
            "in": "query",
            "name": "include_photos",
            "schema": {"type": "boolean"},
            "required": false,
            "description": "If true, include photo URLs in the response for rendering."
          }
        ],
        "responses": {
          "200": {
            "description": "Your Swarm check-ins matching the filters.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/SwarmMyCheckinsResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/me/time": {
      "get": {
        "operationId": "getTime",
        "summary": "Get current local time based on your location (read-only)",
        "responses": {
          "200": {
            "description": "Current local time information.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/CurrentTimeResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/ups/status": {
      "get": {
        "operationId": "getUpsStatus",
        "summary": "Get home UPS status (read-only)",
        "responses": {
          "200": {
            "description": "Home UPS runtime, charge, and temperature.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/UpsStatusResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/server/status": {
      "get": {
        "operationId": "getServerStatus",
        "summary": "Get server uptime info (read-only)",
        "responses": {
          "200": {
            "description": "Server start time and uptime.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ServerVersionResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/server/diagnostics": {
      "get": {
        "operationId": "getDiagnostics",
        "summary": "Get service diagnostics and performance stats (read-only)",
        "responses": {
          "200": {
            "description": "Comprehensive diagnostics including API stats, latency, and error logs.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/DiagnosticsResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/frank/meta": {
      "get": {
        "operationId": "getFrankMeta",
        "summary": "Get FrankAPI documentation for script development",
        "description": "Returns Markdown documentation describing the FrankAPI scripting interface, including all available namespaces (calendar, contacts, sms, swarm, ups, time) and their methods.",
        "responses": {
          "200": {
            "description": "FrankAPI documentation in Markdown format.",
            "content": {
              "text/markdown": {
                "schema": {"type": "string"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/frank/scripts": {
      "get": {
        "operationId": "listFrankScripts",
        "summary": "List all saved scripts",
        "description": "Returns metadata for all saved scripts, including ID, slug, description, parameters, and creation time.",
        "responses": {
          "200": {
            "description": "List of saved scripts.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ListScriptsResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/frank/scripts/{script_id}": {
      "get": {
        "operationId": "getFrankScript",
        "summary": "Get a script's source code",
        "parameters": [
          {
            "in": "path",
            "name": "script_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "The script ID (filename without .py extension)."
          }
        ],
        "responses": {
          "200": {
            "description": "Script source code.",
            "content": {
              "text/x-python": {
                "schema": {"type": "string"}
              }
            }
          },
          "404": {
            "description": "Script not found.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/frank/execute": {
      "post": {
        "operationId": "executeFrankScript",
        "summary": "Execute a script",
        "description": "Execute a new or existing script. For new scripts, provide slug and code. For existing scripts, provide script_id. Returns immediately with a job ID; poll /frank/jobs/{id} for completion.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/ExecuteScriptRequest"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Job created successfully.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ExecuteScriptResponse"}
              }
            }
          },
          "400": {
            "description": "Invalid request (missing required fields).",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          },
          "404": {
            "description": "Script not found (when using script_id).",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/frank/jobs": {
      "get": {
        "operationId": "listFrankJobs",
        "summary": "List all job executions",
        "parameters": [
          {
            "in": "query",
            "name": "status",
            "schema": {"type": "string", "enum": ["pending", "running", "completed", "failed", "timeout"]},
            "required": false,
            "description": "Filter by job status."
          }
        ],
        "responses": {
          "200": {
            "description": "List of job summaries.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ListJobsResponse"}
              }
            }
          },
          "400": {
            "description": "Invalid status filter.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/frank/jobs/{job_id}": {
      "get": {
        "operationId": "getFrankJob",
        "summary": "Get job details",
        "description": "Get full details for a job execution, including stdout, stderr, result, and error information.",
        "parameters": [
          {
            "in": "path",
            "name": "job_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "The job ID."
          }
        ],
        "responses": {
          "200": {
            "description": "Job details.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/JobDetails"}
              }
            }
          },
          "404": {
            "description": "Job not found.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/telegram/send": {
      "get": {
        "operationId": "sendTelegramMessage",
        "summary": "Send a Telegram message via your personal account",
        "description": "Send a message to a Telegram user, group, or channel using your authenticated Telegram account (not a bot). Requires prior session setup via the setup script.",
        "parameters": [
          {
            "in": "query",
            "name": "recipient",
            "schema": {"type": "string"},
            "required": true,
            "description": "Username (with or without @), phone number (E.164 format), or chat ID."
          },
          {
            "in": "query",
            "name": "text",
            "schema": {"type": "string"},
            "required": true,
            "description": "The message text to send."
          }
        ],
        "responses": {
          "200": {
            "description": "Message sent successfully.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/TelegramSendResponse"}
              }
            }
          },
          "400": {
            "description": "Invalid request or message failed.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/telegram/messages": {
      "get": {
        "operationId": "getTelegramMessages",
        "summary": "Get messages from a Telegram chat via your personal account",
        "description": "Retrieve recent messages from a Telegram conversation using your authenticated Telegram account (not a bot). Returns messages you have access to in the specified chat.",
        "parameters": [
          {
            "in": "query",
            "name": "chat",
            "schema": {"type": "string"},
            "required": true,
            "description": "Username, phone number, or chat ID to get messages from."
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {"type": "integer", "default": 20, "minimum": 1, "maximum": 100},
            "required": false,
            "description": "Maximum number of messages to retrieve (default 20, max 100)."
          }
        ],
        "responses": {
          "200": {
            "description": "Messages retrieved successfully.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/TelegramMessagesResponse"}
              }
            }
          },
          "400": {
            "description": "Invalid request or chat not accessible.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/telegram/chats": {
      "get": {
        "operationId": "listTelegramChats",
        "summary": "List your Telegram conversations via your personal account",
        "description": "List recent Telegram conversations (dialogs) from your authenticated Telegram account (not a bot). Includes direct messages, groups, and channels you have access to.",
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "schema": {"type": "integer", "default": 20, "minimum": 1, "maximum": 100},
            "required": false,
            "description": "Maximum number of chats to retrieve (default 20, max 100)."
          }
        ],
        "responses": {
          "200": {
            "description": "Chats retrieved successfully.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/TelegramChatsResponse"}
              }
            }
          },
          "400": {
            "description": "Invalid request.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/jorbs": {
      "get": {
        "operationId": "listJorbs",
        "summary": "List jorbs (long-lived autonomous tasks)",
        "description": "List all jorbs with optional status filter. Jorbs are autonomous tasks that can interact with contacts via SMS, Telegram, or email.",
        "parameters": [
          {
            "in": "query",
            "name": "status",
            "schema": {"type": "string", "enum": ["open", "closed", "all"], "default": "open"},
            "required": false,
            "description": "Filter by status category: 'open' (planning, running, paused), 'closed' (complete, failed, cancelled), or 'all'."
          }
        ],
        "responses": {
          "200": {
            "description": "List of jorbs.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ListJorbsResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/jorbs/create": {
      "get": {
        "operationId": "createJorb",
        "summary": "Create a new jorb (autonomous task)",
        "description": "Create a new long-lived autonomous task. The jorb will manage interactions with specified contacts according to the plan.",
        "parameters": [
          {
            "in": "query",
            "name": "name",
            "schema": {"type": "string"},
            "required": true,
            "description": "Human-readable name for the task."
          },
          {
            "in": "query",
            "name": "plan",
            "schema": {"type": "string"},
            "required": true,
            "description": "Full plan text describing what the jorb should accomplish."
          },
          {
            "in": "query",
            "name": "contacts",
            "schema": {"type": "string"},
            "required": false,
            "description": "JSON array of contacts: [{identifier, channel, name?}]. Channel must be 'sms', 'telegram', or 'email'."
          },
          {
            "in": "query",
            "name": "start_immediately",
            "schema": {"type": "boolean", "default": true},
            "required": false,
            "description": "If true (default), the jorb starts immediately and sends its first message. If false, jorb is created in 'planning' status and waits for approveJorb to start."
          }
        ],
        "responses": {
          "200": {
            "description": "Jorb created successfully.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/CreateJorbResponse"}
              }
            }
          },
          "400": {
            "description": "Invalid request.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/jorbs/brief": {
      "get": {
        "operationId": "briefMe",
        "summary": "Get jorb activity briefing",
        "description": "Get a summary of jorb activity since the last briefing. Includes pending decisions, highlights, and activity per jorb.",
        "parameters": [
          {
            "in": "query",
            "name": "hours",
            "schema": {"type": "integer", "default": 24, "minimum": 1, "maximum": 168},
            "required": false,
            "description": "Only show activity from last N hours (default 24)."
          },
          {
            "in": "query",
            "name": "update_timestamp",
            "schema": {"type": "boolean", "default": true},
            "required": false,
            "description": "Update last briefing timestamp (default true)."
          }
        ],
        "responses": {
          "200": {
            "description": "Briefing summary.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/BriefMeResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/jorbs/{id}": {
      "get": {
        "operationId": "getJorb",
        "summary": "Get jorb details",
        "description": "Get full details for a specific jorb including plan, contacts, progress, and optionally message history.",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {"type": "string"},
            "required": true,
            "description": "The jorb ID."
          },
          {
            "in": "query",
            "name": "include_messages",
            "schema": {"type": "boolean", "default": false},
            "required": false,
            "description": "Include message history in response."
          },
          {
            "in": "query",
            "name": "message_limit",
            "schema": {"type": "integer", "default": 50, "minimum": 1, "maximum": 1000},
            "required": false,
            "description": "Maximum messages to include (default 50)."
          }
        ],
        "responses": {
          "200": {
            "description": "Jorb details.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/GetJorbResponse"}
              }
            }
          },
          "400": {
            "description": "Jorb not found.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/jorbs/{id}/messages": {
      "get": {
        "operationId": "getJorbMessages",
        "summary": "Get jorb message history",
        "description": "Get the full conversation history for a jorb with pagination support.",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {"type": "string"},
            "required": true,
            "description": "The jorb ID."
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {"type": "integer", "default": 50, "minimum": 1, "maximum": 1000},
            "required": false,
            "description": "Maximum messages to return (default 50)."
          },
          {
            "in": "query",
            "name": "offset",
            "schema": {"type": "integer", "default": 0, "minimum": 0},
            "required": false,
            "description": "Skip first N messages (for pagination)."
          }
        ],
        "responses": {
          "200": {
            "description": "Message history.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/GetJorbMessagesResponse"}
              }
            }
          },
          "400": {
            "description": "Jorb not found.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/jorbs/{id}/approve": {
      "get": {
        "operationId": "approveJorb",
        "summary": "Approve or start a jorb",
        "description": "Start a 'planning' jorb or resume a 'paused' jorb. For planning jorbs (created with start_immediately=false), this kicks off the jorb. For paused jorbs, this resumes with the provided decision.",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {"type": "string"},
            "required": true,
            "description": "The jorb ID."
          },
          {
            "in": "query",
            "name": "decision",
            "schema": {"type": "string"},
            "required": true,
            "description": "The approval decision or instructions for the agent."
          }
        ],
        "responses": {
          "200": {
            "description": "Jorb approved and resumed.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ApproveJorbResponse"}
              }
            }
          },
          "400": {
            "description": "Jorb not found or not paused.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/jorbs/{id}/cancel": {
      "get": {
        "operationId": "cancelJorb",
        "summary": "Cancel a jorb",
        "description": "Cancel an active jorb. Cannot cancel already complete or cancelled jorbs.",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {"type": "string"},
            "required": true,
            "description": "The jorb ID."
          },
          {
            "in": "query",
            "name": "reason",
            "schema": {"type": "string"},
            "required": false,
            "description": "Optional reason for cancellation."
          }
        ],
        "responses": {
          "200": {
            "description": "Jorb cancelled.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/CancelJorbResponse"}
              }
            }
          },
          "400": {
            "description": "Jorb not found or cannot be cancelled.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/repos": {
      "get": {
        "operationId": "listClaudiaRepos",
        "summary": "List Claudia-managed repositories",
        "description": "List all repositories managed by Claudia with their status and queue information.",
        "responses": {
          "200": {
            "description": "List of Claudia repositories.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ClaudiaReposResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/chat/create": {
      "get": {
        "operationId": "createClaudiaChat",
        "summary": "Create a chat with Claudia about a repository",
        "description": "Start a conversation with Claudia to discuss features and implementations. The chat enters a queue.",
        "parameters": [
          {
            "in": "query",
            "name": "repo_name",
            "schema": {"type": "string"},
            "required": true,
            "description": "Name of the repository to discuss."
          },
          {
            "in": "query",
            "name": "title",
            "schema": {"type": "string"},
            "required": true,
            "description": "Chat title/topic."
          },
          {
            "in": "query",
            "name": "message",
            "schema": {"type": "string"},
            "required": false,
            "description": "Optional initial message to start the conversation."
          }
        ],
        "responses": {
          "200": {
            "description": "Chat created successfully.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ClaudiaChatResponse"}
              }
            }
          },
          "400": {
            "description": "Repository not found or invalid parameters.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/repos/{repo_id}/chats": {
      "get": {
        "operationId": "listClaudiaChats",
        "summary": "List chats for a repository",
        "description": "List all chats for a repository with optional status filter.",
        "parameters": [
          {
            "in": "path",
            "name": "repo_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Repository ID."
          },
          {
            "in": "query",
            "name": "status",
            "schema": {"type": "string", "enum": ["active", "completed", "cancelled"]},
            "required": false,
            "description": "Filter by chat status."
          }
        ],
        "responses": {
          "200": {
            "description": "List of chats.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ClaudiaChatsResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/repos/{repo_id}/chats/{chat_id}": {
      "get": {
        "operationId": "getClaudiaChat",
        "summary": "Get chat state and messages",
        "description": "Get the current state of a chat with Claudia including all messages.",
        "parameters": [
          {
            "in": "path",
            "name": "repo_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Repository ID."
          },
          {
            "in": "path",
            "name": "chat_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Chat ID."
          }
        ],
        "responses": {
          "200": {
            "description": "Chat details with messages.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ClaudiaChatDetailsResponse"}
              }
            }
          },
          "400": {
            "description": "Chat not found.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/repos/{repo_id}/chats/{chat_id}/message": {
      "get": {
        "operationId": "sendClaudiaMessage",
        "summary": "Send a message to Claudia",
        "description": "Add a message to an active chat. Claudia will process it when the chat is at the front of the queue.",
        "parameters": [
          {
            "in": "path",
            "name": "repo_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Repository ID."
          },
          {
            "in": "path",
            "name": "chat_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Chat ID."
          },
          {
            "in": "query",
            "name": "message",
            "schema": {"type": "string"},
            "required": true,
            "description": "Message content to send to Claudia."
          }
        ],
        "responses": {
          "200": {
            "description": "Message added.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ClaudiaMessageResponse"}
              }
            }
          },
          "400": {
            "description": "Chat not found or not active.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/repos/{repo_id}/chats/{chat_id}/end": {
      "get": {
        "operationId": "endClaudiaChat",
        "summary": "End a chat with Claudia",
        "description": "End the chat session. The chat must be active to be ended.",
        "parameters": [
          {
            "in": "path",
            "name": "repo_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Repository ID."
          },
          {
            "in": "path",
            "name": "chat_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Chat ID."
          }
        ],
        "responses": {
          "200": {
            "description": "Chat ended.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ClaudiaChatEndResponse"}
              }
            }
          },
          "400": {
            "description": "Chat not found or already ended.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/repos/{repo_id}/prompts": {
      "get": {
        "operationId": "listClaudiaPrompts",
        "summary": "List prompts for a repository",
        "description": "List all prompts in a repository.",
        "parameters": [
          {
            "in": "path",
            "name": "repo_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Repository ID."
          }
        ],
        "responses": {
          "200": {
            "description": "List of prompts.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ClaudiaPromptsResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/repos/{repo_id}/prompts/create": {
      "get": {
        "operationId": "createClaudiaPrompt",
        "summary": "Create prompt from completed chat",
        "description": "Queue prompt generation from a completed chat conversation.",
        "parameters": [
          {
            "in": "path",
            "name": "repo_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Repository ID."
          },
          {
            "in": "query",
            "name": "chat_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "ID of the completed chat."
          }
        ],
        "responses": {
          "200": {
            "description": "Prompt generation queued.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ClaudiaPromptGenerationQueued"}
              }
            }
          },
          "400": {
            "description": "Chat not suitable for prompt generation.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/repos/{repo_id}/prompts/{prompt_id}": {
      "get": {
        "operationId": "getClaudiaPrompt",
        "summary": "Get prompt details",
        "description": "Get details of a specific prompt including its content.",
        "parameters": [
          {
            "in": "path",
            "name": "repo_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Repository ID."
          },
          {
            "in": "path",
            "name": "prompt_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Prompt ID."
          }
        ],
        "responses": {
          "200": {
            "description": "Prompt details.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ClaudiaPromptDetailsResponse"}
              }
            }
          },
          "400": {
            "description": "Prompt not found.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/repos/{repo_id}/prompts/{prompt_id}/execute": {
      "get": {
        "operationId": "executeClaudiaPrompt",
        "summary": "Execute a prompt directly",
        "description": "Queue a prompt for direct execution by Claude via the unified queue.",
        "parameters": [
          {
            "in": "path",
            "name": "repo_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Repository ID."
          },
          {
            "in": "path",
            "name": "prompt_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Prompt ID to execute."
          }
        ],
        "responses": {
          "200": {
            "description": "Execution queued.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ClaudiaExecutionQueued"}
              }
            }
          },
          "400": {
            "description": "Prompt cannot be executed (not ready, blocked, etc.).",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/repos/{repo_id}/queue": {
      "get": {
        "operationId": "getClaudiaQueue",
        "summary": "Get queue status for a repository",
        "description": "Get the current queue state including pending and active items.",
        "parameters": [
          {
            "in": "path",
            "name": "repo_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Repository ID."
          }
        ],
        "responses": {
          "200": {
            "description": "Queue status.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ClaudiaQueueResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/executions": {
      "get": {
        "operationId": "listClaudiaExecutions",
        "summary": "List executions",
        "description": "List executions with optional filters by repository and status.",
        "parameters": [
          {
            "in": "query",
            "name": "repo_id",
            "schema": {"type": "string"},
            "required": false,
            "description": "Filter by repository ID."
          },
          {
            "in": "query",
            "name": "status",
            "schema": {"type": "string"},
            "required": false,
            "description": "Filter by status."
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {"type": "integer", "default": 50},
            "required": false,
            "description": "Max results."
          }
        ],
        "responses": {
          "200": {
            "description": "List of executions.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ClaudiaExecutionsResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/claudia/executions/{execution_id}": {
      "get": {
        "operationId": "getClaudiaExecution",
        "summary": "Get execution details",
        "description": "Get full execution details including prompt, output, git diff, and costs.",
        "parameters": [
          {
            "in": "path",
            "name": "execution_id",
            "schema": {"type": "string"},
            "required": true,
            "description": "Execution ID."
          }
        ],
        "responses": {
          "200": {
            "description": "Execution details.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ClaudiaExecutionResponse"}
              }
            }
          },
          "400": {
            "description": "Execution not found.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/getScreen": {
      "get": {
        "operationId": "androidPhoneGetScreen",
        "summary": "Get Android phone screen state",
        "description": "Captures a screenshot and parses UI elements for LLM-in-the-loop automation. Returns base64 screenshot, raw XML, and parsed clickable elements with coordinates. This is the foundation for visual phone automation.",
        "responses": {
          "200": {
            "description": "Screen state captured successfully.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/AndroidPhoneScreenResponse"}
              }
            }
          },
          "400": {
            "description": "Device connection or capture failed.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/health": {
      "get": {
        "operationId": "androidPhoneHealth",
        "summary": "Health check for Android phone",
        "description": "Returns device connection status, model, Android version, battery level, and WiFi SSID. Results are cached for 30 seconds. Public endpoint - no API key required.",
        "responses": {
          "200": {
            "description": "Health check result.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/AndroidPhoneHealthResponse"}
              }
            }
          }
        }
      }
    },
    "/actions/androidPhone/doTask": {
      "get": {
        "operationId": "androidPhoneDoTask",
        "summary": "Execute goal-based task on Android phone",
        "description": "Universal Android phone automation. Describe your goal in natural language. Capabilities: thermostat, smart home, Uber/Lyft, DoorDash, browser, any app. STOPS before payments/purchases. Cost: $0.03-0.15, takes 10-30s.",
        "parameters": [
          {
            "in": "query",
            "name": "goal",
            "required": true,
            "schema": {"type": "string"},
            "description": "Natural language description of what to accomplish. Be specific about the desired outcome."
          },
          {
            "in": "query",
            "name": "app",
            "schema": {"type": "string", "enum": ["google_home", "uber", "lyft", "doordash", "uber_eats", "chrome", "maps", "settings"]},
            "description": "Optional: specific app to launch. Auto-detected from goal if omitted."
          }
        ],
        "responses": {
          "200": {
            "description": "Task result with extracted data or confirmation.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/AndroidPhoneDoTaskResponse"}
              }
            }
          },
          "400": {
            "description": "Task failed.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/thermostat/setRange": {
      "get": {
        "operationId": "androidPhoneThermostatSetRange",
        "summary": "Set thermostat temperature range",
        "description": "Uses LLM-in-the-loop automation to navigate Google Home app and set thermostat to specified temperature range. This action consumes LLM tokens and may take 10-30 seconds. Estimated cost: $0.05-0.15 per call.",
        "parameters": [
          {
            "in": "query",
            "name": "low_temp",
            "schema": {"type": "integer"},
            "required": true,
            "description": "Target low (heat) temperature in Fahrenheit. Range: 50-90F."
          },
          {
            "in": "query",
            "name": "high_temp",
            "schema": {"type": "integer"},
            "required": true,
            "description": "Target high (cool) temperature in Fahrenheit. Range: 50-90F. Must be greater than low_temp."
          }
        ],
        "responses": {
          "200": {
            "description": "Thermostat set operation result.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/AndroidPhoneThermostatSetRangeResponse"}
              }
            }
          },
          "400": {
            "description": "Invalid parameters or operation failed.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/thermostat/getStatus": {
      "get": {
        "operationId": "androidPhoneThermostatGetStatus",
        "summary": "Get thermostat status",
        "description": "Uses LLM-in-the-loop automation to navigate Google Home app and read current thermostat status. Returns current temperature, setpoints, mode, and humidity. Estimated cost: $0.03-0.08 per call.",
        "responses": {
          "200": {
            "description": "Thermostat status.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/AndroidPhoneThermostatGetStatusResponse"}
              }
            }
          },
          "400": {
            "description": "Operation failed (e.g., thermostat offline).",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/audit": {
      "get": {
        "operationId": "androidPhoneAudit",
        "summary": "Get Android phone audit log",
        "description": "Returns recent Android phone actions logged for auditing. Useful for reviewing what automations have been executed.",
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "schema": {"type": "integer", "default": 100, "maximum": 500},
            "description": "Maximum entries to return."
          },
          {
            "in": "query",
            "name": "action",
            "schema": {"type": "string"},
            "description": "Filter by action name."
          }
        ],
        "responses": {
          "200": {
            "description": "Audit log entries.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/AndroidPhoneAuditResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/maintenance/updateApps": {
      "get": {
        "operationId": "androidPhoneUpdateApps",
        "summary": "Check and install app updates",
        "description": "Launches Play Store to check for and install available app updates. Returns workflow steps for LLM automation to complete.",
        "responses": {
          "200": {
            "description": "Update check result.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/AndroidPhoneMaintenanceResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/maintenance/checkSecurity": {
      "get": {
        "operationId": "androidPhoneCheckSecurity",
        "summary": "Check security patch level",
        "description": "Returns the device's current Android security patch date and version info.",
        "responses": {
          "200": {
            "description": "Security patch info.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/AndroidPhoneSecurityResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/maintenance/reboot": {
      "get": {
        "operationId": "androidPhoneReboot",
        "summary": "Reboot the Android device",
        "description": "Reboots the device. Requires explicit confirmation to prevent accidental reboots.",
        "parameters": [
          {
            "in": "query",
            "name": "confirm",
            "schema": {"type": "string"},
            "required": true,
            "description": "Must be 'true' to actually perform reboot."
          }
        ],
        "responses": {
          "200": {
            "description": "Reboot status.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/AndroidPhoneMaintenanceResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/maintenance/storage": {
      "get": {
        "operationId": "androidPhoneGetStorage",
        "summary": "Get device storage info",
        "description": "Returns storage usage including total, used, and free space with percentages.",
        "responses": {
          "200": {
            "description": "Storage info.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/AndroidPhoneStorageResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/maintenance/clearCache": {
      "get": {
        "operationId": "androidPhoneClearCache",
        "summary": "Clear app caches",
        "description": "Clears app caches if storage usage exceeds threshold. Helps free up space on the device.",
        "parameters": [
          {
            "in": "query",
            "name": "threshold",
            "schema": {"type": "number", "default": 90},
            "description": "Storage used percentage threshold to trigger clearing (default 90)."
          }
        ],
        "responses": {
          "200": {
            "description": "Cache clear result.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/AndroidPhoneMaintenanceResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    },
    "/actions/androidPhone/maintenance/battery": {
      "get": {
        "operationId": "androidPhoneBatteryHealth",
        "summary": "Get battery health info",
        "description": "Returns detailed battery information including level, health status, temperature, and charging state.",
        "responses": {
          "200": {
            "description": "Battery health info.",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/AndroidPhoneBatteryResponse"}
              }
            }
          }
        },
        "security": [{"ActionsApiKey": []}]
      }
    }
  },
  "components": {
    "schemas": {
      "HelloWorldResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "name": {"type": "string"}
        },
        "required": ["message", "name"]
      },
      "CalendarDescriptor": {
        "type": "object",
        "properties": {
          "id": {"type": "string"},
          "label": {"type": "string"}
        }
      },
      "TimeWindow": {
        "type": "object",
        "properties": {
          "time_min": {"type": "string"},
          "time_max": {"type": "string"},
          "time_zone": {"type": "string"}
        }
      },
      "CalendarEvent": {
        "type": "object",
        "description": "Google Calendar event.",
        "properties": {
          "id": {"type": "string"},
          "summary": {"type": "string"},
          "description": {"type": "string"},
          "location": {"type": "string"},
          "htmlLink": {"type": "string", "format": "uri"},
          "start": {"type": "object", "additionalProperties": true},
          "end": {"type": "object", "additionalProperties": true},
          "attendees": {
            "type": "array",
            "items": {"type": "object", "additionalProperties": true}
          }
        },
        "additionalProperties": true
      },
      "ListCalendarEventsResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "calendar": {"$ref": "#/components/schemas/CalendarDescriptor"},
          "time_window": {"$ref": "#/components/schemas/TimeWindow"},
          "count": {"type": "integer"},
          "events": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/CalendarEvent"}
          }
        },
        "required": ["message", "calendar", "time_window", "count", "events"]
      },
      "CreateCalendarEventRequest": {
        "type": "object",
        "properties": {
          "summary": {"type": "string"},
          "start": {"type": "string", "description": "Start time in ISO8601 format."},
          "end": {"type": "string", "description": "End time in ISO8601 format."},
          "attendees": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Email addresses for attendees."
          },
          "description": {"type": "string"},
          "location": {"type": "string", "description": "Location or address for the event."},
          "time_zone": {"type": "string"},
          "calendar_id": {"type": "string"},
          "calendar_name": {"type": "string"}
        },
        "required": ["summary", "start", "end"]
      },
      "CreateCalendarEventResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "calendar": {"$ref": "#/components/schemas/CalendarDescriptor"},
          "event": {"$ref": "#/components/schemas/CalendarEvent"}
        },
        "required": ["message", "calendar", "event"]
      },
      "CalendarSummary": {
        "type": "object",
        "properties": {
          "id": {"type": "string"},
          "summary": {"type": "string"},
          "timeZone": {"type": "string"},
          "primary": {"type": "boolean"},
          "accessRole": {"type": "string"}
        }
      },
      "ListCalendarsResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "count": {"type": "integer"},
          "calendars": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/CalendarSummary"}
          }
        },
        "required": ["message", "count", "calendars"]
      },
      "ContactResult": {
        "type": "object",
        "properties": {
          "resource_name": {"type": "string"},
          "display_name": {"type": "string"},
          "emails": {"type": "array", "items": {"type": "string"}},
          "phones": {"type": "array", "items": {"type": "string"}}
        }
      },
      "SearchContactsResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "query": {"type": "string"},
          "count": {"type": "integer"},
          "contacts": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/ContactResult"}
          }
        },
        "required": ["message", "query", "count", "contacts"]
      },
      "SendSMSResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string", "description": "Human-readable summary of the action."},
          "success": {"type": "boolean"},
          "recipient": {"type": "string", "description": "Contact name or phone number."},
          "to_number": {"type": "string", "description": "The phone number the SMS was sent to."},
          "from_number": {"type": "string", "description": "The Telnyx phone number used to send."},
          "message_id": {"type": "string", "description": "Telnyx message ID for tracking."},
          "text_preview": {"type": "string", "description": "Preview of the message text sent."}
        },
        "required": ["message", "success", "recipient", "to_number", "from_number"]
      },
      "SmsMessageEntry": {
        "type": "object",
        "properties": {
          "timestamp": {"type": "string", "format": "date-time", "description": "ISO 8601 timestamp."},
          "direction": {"type": "string", "enum": ["inbound", "outbound"]},
          "contact": {"type": "string", "description": "Contact name if known."},
          "phone": {"type": "string", "description": "Phone number."},
          "preview": {"type": "string", "description": "First 100 characters of message."},
          "hasAttachments": {"type": "boolean", "description": "True if message has MMS attachments."},
          "jorbId": {"type": "string", "description": "Job ID if processed."}
        },
        "required": ["timestamp", "direction", "phone", "preview", "hasAttachments"]
      },
      "GetSmsMessagesResponse": {
        "type": "object",
        "properties": {
          "count": {"type": "integer", "description": "Number of messages returned."},
          "messages": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/SmsMessageEntry"},
            "description": "List of SMS messages."
          }
        },
        "required": ["count", "messages"]
      },
      "SwarmVenue": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "city": {"type": "string"},
          "state": {"type": "string"},
          "country": {"type": "string"},
          "latitude": {"type": "number"},
          "longitude": {"type": "number"},
          "canonical_url": {"type": "string", "format": "uri"}
        }
      },
      "SwarmCompanion": {
        "type": "object",
        "properties": {
          "id": {"type": "string"},
          "first_name": {"type": "string"},
          "last_name": {"type": "string"},
          "display_name": {"type": "string"}
        }
      },
      "SwarmPhoto": {
        "type": "object",
        "properties": {
          "url": {"type": "string", "format": "uri", "description": "Photo URL for rendering."},
          "width": {"type": "integer"},
          "height": {"type": "integer"}
        }
      },
      "SwarmCheckinEntry": {
        "type": "object",
        "properties": {
          "iso_time": {"type": "string", "format": "date-time"},
          "minutes_since": {"type": "integer"},
          "stale": {"type": "boolean"},
          "venue": {"$ref": "#/components/schemas/SwarmVenue"},
          "categories": {"type": "array", "items": {"type": "string"}},
          "shout": {"type": "string"},
          "companions": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/SwarmCompanion"}
          },
          "photo_count": {"type": "integer"},
          "photos": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/SwarmPhoto"}
          }
        }
      },
      "SwarmCheckinsFilters": {
        "type": "object",
        "properties": {
          "year": {"type": "integer"},
          "after_date": {"type": "string"},
          "before_date": {"type": "string"},
          "with_companion": {"type": "array", "items": {"type": "string"}},
          "only_with_companions": {"type": "boolean"},
          "category": {"type": "string"},
          "has_photos": {"type": "boolean"},
          "include_photos": {"type": "boolean"}
        }
      },
      "SwarmMyCheckinsResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "count": {"type": "integer"},
          "checkins": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/SwarmCheckinEntry"}
          },
          "filters": {"$ref": "#/components/schemas/SwarmCheckinsFilters"}
        },
        "required": ["message", "count", "checkins"]
      },
      "CurrentTimeResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "iso_time": {"type": "string", "format": "date-time"},
          "timezone": {"type": "string"},
          "offset_minutes": {"type": "integer"}
        },
        "required": ["message", "iso_time", "timezone", "offset_minutes"]
      },
      "UpsRuntime": {
        "type": "object",
        "properties": {
          "hours": {"type": "integer", "minimum": 0},
          "mins": {"type": "integer", "minimum": 0, "maximum": 59},
          "human": {"type": "string", "description": "Human-readable runtime, e.g. '1h 22m'."}
        },
        "required": ["hours", "mins", "human"]
      },
      "UpsStatusResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "runtime": {"$ref": "#/components/schemas/UpsRuntime"},
          "charge_percent": {"type": "integer", "minimum": 0, "maximum": 100},
          "temperature_f": {"type": "number"}
        },
        "required": ["message", "runtime", "charge_percent", "temperature_f"]
      },
      "ServerVersionResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "startup_iso_time": {"type": "string", "format": "date-time"},
          "uptime_seconds": {"type": "integer"}
        },
        "required": ["message", "startup_iso_time", "uptime_seconds"]
      },
      "DiagnosticsResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "server": {
            "type": "object",
            "properties": {
              "start_time": {"type": "string", "format": "date-time"},
              "current_time": {"type": "string", "format": "date-time"},
              "uptime_seconds": {"type": "integer"},
              "uptime_human": {"type": "string"}
            }
          },
          "interactions": {
            "type": "object",
            "properties": {
              "total_api_calls": {"type": "integer"},
              "by_endpoint": {"type": "array", "items": {"type": "object"}}
            }
          },
          "services": {"type": "object", "additionalProperties": true},
          "system": {
            "type": "object",
            "properties": {
              "python_version": {"type": "string"},
              "platform": {"type": "string"}
            }
          },
          "recent_errors": {"type": "array", "items": {"type": "object"}}
        },
        "required": ["message", "server", "interactions"]
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "detail": {"type": "string"}
        }
      },
      "ScriptParameter": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "type": {"type": "string"},
          "description": {"type": "string"}
        },
        "required": ["name", "description"]
      },
      "ScriptMetadata": {
        "type": "object",
        "properties": {
          "id": {"type": "string", "description": "Script ID (filename without .py)."},
          "slug": {"type": "string", "description": "Script slug."},
          "description": {"type": "string", "description": "Script description from docstring."},
          "parameters": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/ScriptParameter"}
          },
          "example": {"type": "string", "description": "Example usage from docstring."},
          "created_at": {"type": "string", "format": "date-time"}
        },
        "required": ["id", "slug", "description", "parameters", "created_at"]
      },
      "ListScriptsResponse": {
        "type": "object",
        "properties": {
          "count": {"type": "integer"},
          "scripts": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/ScriptMetadata"}
          }
        },
        "required": ["count", "scripts"]
      },
      "ExecuteScriptRequest": {
        "type": "object",
        "properties": {
          "script_id": {"type": "string", "description": "ID of existing script to execute."},
          "slug": {"type": "string", "description": "Slug for new script (required with code)."},
          "code": {"type": "string", "description": "Python source code for new script."},
          "params": {
            "type": "object",
            "additionalProperties": true,
            "description": "Parameters to pass to the script's main() function."
          }
        },
        "description": "Either script_id OR both slug and code are required."
      },
      "ExecuteScriptResponse": {
        "type": "object",
        "properties": {
          "job_id": {"type": "string", "description": "Unique job identifier for polling."},
          "script_id": {"type": "string", "description": "ID of the executed script."},
          "status": {"type": "string", "enum": ["pending", "running"], "description": "Initial job status."},
          "started_at": {"type": "string", "format": "date-time"}
        },
        "required": ["job_id", "script_id", "status"]
      },
      "JobSummary": {
        "type": "object",
        "properties": {
          "job_id": {"type": "string"},
          "script_id": {"type": "string"},
          "status": {"type": "string", "enum": ["pending", "running", "completed", "failed", "timeout"]},
          "started_at": {"type": "string", "format": "date-time"},
          "completed_at": {"type": "string", "format": "date-time"}
        },
        "required": ["job_id", "script_id", "status"]
      },
      "ListJobsResponse": {
        "type": "object",
        "properties": {
          "count": {"type": "integer"},
          "jobs": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/JobSummary"}
          }
        },
        "required": ["count", "jobs"]
      },
      "JobDetails": {
        "type": "object",
        "properties": {
          "job_id": {"type": "string"},
          "script_id": {"type": "string"},
          "status": {"type": "string", "enum": ["pending", "running", "completed", "failed", "timeout"]},
          "params": {"type": "object", "additionalProperties": true},
          "started_at": {"type": "string", "format": "date-time"},
          "completed_at": {"type": "string", "format": "date-time"},
          "stdout": {"type": "string", "description": "Captured standard output."},
          "stderr": {"type": "string", "description": "Captured standard error."},
          "result": {"description": "Return value from main() function."},
          "error": {"type": "string", "description": "Error message if status is failed or timeout."}
        },
        "required": ["job_id", "script_id", "status", "params", "stdout", "stderr"]
      },
      "TelegramSendResponse": {
        "type": "object",
        "description": "Response from sending a Telegram message via user account.",
        "properties": {
          "message": {"type": "string", "description": "Human-readable summary of the action."},
          "success": {"type": "boolean"},
          "recipient": {"type": "string", "description": "Username, phone, or chat ID the message was sent to."},
          "message_id": {"type": "integer", "description": "Telegram message ID for tracking."},
          "text_preview": {"type": "string", "description": "Preview of the message text sent (max 100 chars)."}
        },
        "required": ["message", "success", "recipient"]
      },
      "TelegramMessage": {
        "type": "object",
        "description": "A Telegram message from a conversation.",
        "properties": {
          "id": {"type": "integer", "description": "Telegram message ID."},
          "text": {"type": "string", "description": "Message text content (null for media-only messages)."},
          "date": {"type": "string", "format": "date-time", "description": "When the message was sent."},
          "sender_id": {"type": "integer", "description": "Telegram user ID of the sender."},
          "sender_name": {"type": "string", "description": "Display name of the sender."},
          "is_outgoing": {"type": "boolean", "description": "True if you sent this message."}
        },
        "required": ["id", "date", "is_outgoing"]
      },
      "TelegramMessagesResponse": {
        "type": "object",
        "description": "Response containing messages from a Telegram chat.",
        "properties": {
          "success": {"type": "boolean"},
          "chat": {"type": "string", "description": "Chat identifier that was queried."},
          "count": {"type": "integer", "description": "Number of messages returned."},
          "messages": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/TelegramMessage"}
          }
        },
        "required": ["success", "chat", "count", "messages"]
      },
      "TelegramChat": {
        "type": "object",
        "description": "A Telegram conversation/dialog.",
        "properties": {
          "id": {"type": "integer", "description": "Telegram chat ID."},
          "name": {"type": "string", "description": "Chat name or contact name."},
          "type": {"type": "string", "enum": ["user", "group", "supergroup", "channel", "unknown"], "description": "Type of chat."},
          "unread_count": {"type": "integer", "description": "Number of unread messages."},
          "last_message_date": {"type": "string", "format": "date-time", "description": "When the last message was sent."}
        },
        "required": ["id", "name", "type", "unread_count"]
      },
      "TelegramChatsResponse": {
        "type": "object",
        "description": "Response containing list of Telegram conversations.",
        "properties": {
          "success": {"type": "boolean"},
          "count": {"type": "integer", "description": "Number of chats returned."},
          "chats": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/TelegramChat"}
          }
        },
        "required": ["success", "count", "chats"]
      },
      "JorbContact": {
        "type": "object",
        "description": "A contact associated with a jorb.",
        "properties": {
          "identifier": {"type": "string", "description": "Phone number, username, or email address."},
          "channel": {"type": "string", "enum": ["sms", "telegram", "email"], "description": "Communication channel."},
          "name": {"type": "string", "description": "Optional display name."}
        },
        "required": ["identifier", "channel"]
      },
      "JorbMessage": {
        "type": "object",
        "description": "A message in a jorb's conversation history.",
        "properties": {
          "id": {"type": "string", "description": "Message ID."},
          "timestamp": {"type": "string", "format": "date-time", "description": "ISO 8601 timestamp."},
          "direction": {"type": "string", "enum": ["inbound", "outbound"], "description": "Message direction."},
          "channel": {"type": "string", "enum": ["sms", "telegram", "email"], "description": "Communication channel."},
          "sender": {"type": "string", "description": "Sender identifier."},
          "sender_name": {"type": "string", "description": "Sender display name."},
          "recipient": {"type": "string", "description": "Recipient identifier."},
          "content": {"type": "string", "description": "Message content."},
          "agent_reasoning": {"type": "string", "description": "Agent's reasoning for outbound messages."}
        },
        "required": ["id", "timestamp", "direction", "channel", "content"]
      },
      "JorbSummary": {
        "type": "object",
        "description": "Summary of a jorb for list view.",
        "properties": {
          "jorb_id": {"type": "string", "description": "Unique jorb identifier."},
          "name": {"type": "string", "description": "Human-readable name."},
          "status": {"type": "string", "enum": ["planning", "running", "paused", "complete", "failed", "cancelled"], "description": "Current status."},
          "created_at": {"type": "string", "format": "date-time"},
          "updated_at": {"type": "string", "format": "date-time"},
          "progress": {"type": "string", "description": "Progress summary."},
          "awaiting": {"type": "string", "description": "What the jorb is waiting for."},
          "paused_reason": {"type": "string", "description": "Why the jorb is paused."}
        },
        "required": ["jorb_id", "name", "status", "created_at", "updated_at"]
      },
      "ListJorbsResponse": {
        "type": "object",
        "properties": {
          "count": {"type": "integer", "description": "Number of jorbs returned."},
          "status_filter": {"type": "string", "description": "The status filter that was applied."},
          "jorbs": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/JorbSummary"}
          }
        },
        "required": ["count", "status_filter", "jorbs"]
      },
      "CreateJorbResponse": {
        "type": "object",
        "properties": {
          "jorb_id": {"type": "string", "description": "Created jorb ID."},
          "name": {"type": "string"},
          "status": {"type": "string", "enum": ["planning", "running", "paused"]},
          "plan": {"type": "string"},
          "contacts": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/JorbContact"}
          },
          "created_at": {"type": "string", "format": "date-time"},
          "kickoff": {
            "type": "object",
            "description": "Result of kickoff attempt if start_immediately was true.",
            "properties": {
              "success": {"type": "boolean"},
              "action_taken": {"type": "string"},
              "message_sent": {"type": "boolean"},
              "error": {"type": "string"}
            }
          }
        },
        "required": ["jorb_id", "name", "status", "plan", "contacts", "created_at"]
      },
      "GetJorbResponse": {
        "type": "object",
        "properties": {
          "jorb_id": {"type": "string"},
          "name": {"type": "string"},
          "status": {"type": "string", "enum": ["planning", "running", "paused", "complete", "failed", "cancelled"]},
          "plan": {"type": "string"},
          "progress_summary": {"type": "string"},
          "contacts": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/JorbContact"}
          },
          "created_at": {"type": "string", "format": "date-time"},
          "updated_at": {"type": "string", "format": "date-time"},
          "paused_reason": {"type": "string"},
          "needs_approval_for": {"type": "string"},
          "awaiting": {"type": "string"},
          "messages": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/JorbMessage"},
            "description": "Message history (if include_messages=true)."
          },
          "message_count": {"type": "integer", "description": "Number of messages included."}
        },
        "required": ["jorb_id", "name", "status", "plan", "contacts", "created_at", "updated_at"]
      },
      "GetJorbMessagesResponse": {
        "type": "object",
        "properties": {
          "jorb_id": {"type": "string"},
          "jorb_name": {"type": "string"},
          "count": {"type": "integer"},
          "offset": {"type": "integer"},
          "limit": {"type": "integer"},
          "messages": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/JorbMessage"}
          }
        },
        "required": ["jorb_id", "jorb_name", "count", "offset", "limit", "messages"]
      },
      "ApproveJorbResponse": {
        "type": "object",
        "properties": {
          "jorb_id": {"type": "string"},
          "name": {"type": "string"},
          "status": {"type": "string"},
          "progress_summary": {"type": "string"},
          "decision": {"type": "string", "description": "The approval decision provided."},
          "updated_at": {"type": "string", "format": "date-time"},
          "agent_result": {
            "type": "object",
            "description": "Result of agent processing the approval.",
            "properties": {
              "success": {"type": "boolean"},
              "action_taken": {"type": "string"},
              "message_sent": {"type": "boolean"},
              "error": {"type": "string"}
            }
          }
        },
        "required": ["jorb_id", "name", "status", "decision", "updated_at"]
      },
      "CancelJorbResponse": {
        "type": "object",
        "properties": {
          "jorb_id": {"type": "string"},
          "name": {"type": "string"},
          "status": {"type": "string"},
          "progress_summary": {"type": "string"},
          "reason": {"type": "string", "description": "Cancellation reason if provided."},
          "updated_at": {"type": "string", "format": "date-time"}
        },
        "required": ["jorb_id", "name", "status", "updated_at"]
      },
      "JorbActivitySummary": {
        "type": "object",
        "description": "Activity summary for a single jorb.",
        "properties": {
          "jorb_id": {"type": "string"},
          "name": {"type": "string"},
          "status": {"type": "string"},
          "message_count": {"type": "integer", "description": "Messages since last briefing."},
          "recent_messages": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "timestamp": {"type": "string"},
                "direction": {"type": "string"},
                "content": {"type": "string", "description": "Truncated message content."}
              }
            }
          },
          "awaiting": {"type": "string"}
        },
        "required": ["jorb_id", "name", "status", "message_count"]
      },
      "PendingDecision": {
        "type": "object",
        "description": "A jorb awaiting approval.",
        "properties": {
          "jorb_id": {"type": "string"},
          "name": {"type": "string"},
          "paused_reason": {"type": "string"},
          "needs_approval_for": {"type": "string"},
          "options": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Available actions (approve, cancel)."
          }
        },
        "required": ["jorb_id", "name", "options"]
      },
      "BriefMeResponse": {
        "type": "object",
        "description": "Jorb activity briefing summary.",
        "properties": {
          "briefing_time": {"type": "string", "format": "date-time", "description": "Current briefing timestamp."},
          "since": {"type": "string", "format": "date-time", "description": "Activity measured from this time."},
          "last_briefing": {"type": "string", "format": "date-time", "description": "Previous briefing timestamp."},
          "needs_attention": {"type": "integer", "description": "Count of paused jorbs requiring approval."},
          "activity_summary": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/JorbActivitySummary"},
            "description": "Activity per jorb."
          },
          "highlights": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Notable events (completions, message counts, etc.)."
          },
          "pending_decisions": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/PendingDecision"},
            "description": "Jorbs awaiting approval."
          },
          "total_open_jorbs": {"type": "integer", "description": "Total active/paused jorbs."},
          "recently_completed": {"type": "integer", "description": "Jorbs completed since last briefing."}
        },
        "required": ["briefing_time", "needs_attention", "activity_summary", "highlights", "pending_decisions", "total_open_jorbs", "recently_completed"]
      },
      "ClaudiaRepo": {
        "type": "object",
        "description": "A Claudia-managed repository.",
        "properties": {
          "id": {"type": "string", "description": "Repository ID."},
          "name": {"type": "string", "description": "Repository name."},
          "owner": {"type": "string", "description": "Repository owner."},
          "full_name": {"type": "string", "description": "Full repository name (owner/name)."},
          "status": {"type": "string", "enum": ["pending", "bootstrapping", "ready", "paused", "error"], "description": "Repository status."},
          "model": {"type": "string", "description": "Model used for this repo."},
          "blocked_task_count": {"type": "integer", "description": "Number of blocked tasks."},
          "queued_prompt_id": {"type": "string", "description": "ID of queued prompt if any."},
          "prompt_status": {"type": "string", "enum": ["queued", "executing"], "description": "Prompt queue status."}
        },
        "required": ["id", "name", "full_name", "status"]
      },
      "ClaudiaReposResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "count": {"type": "integer"},
          "repos": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/ClaudiaRepo"}
          }
        },
        "required": ["message", "count", "repos"]
      },
      "ClaudiaChatSummary": {
        "type": "object",
        "description": "Chat session summary.",
        "properties": {
          "id": {"type": "string", "description": "Chat ID."},
          "title": {"type": "string", "description": "Chat title/topic."},
          "status": {"type": "string", "enum": ["active", "completed", "cancelled"], "description": "Chat status."},
          "message_count": {"type": "integer"},
          "queue_position": {"type": "integer"},
          "created_at": {"type": "string", "format": "date-time"},
          "updated_at": {"type": "string", "format": "date-time"}
        },
        "required": ["id", "title", "status"]
      },
      "ClaudiaChatMessage": {
        "type": "object",
        "description": "A message in a Claudia chat.",
        "properties": {
          "id": {"type": "string"},
          "role": {"type": "string", "enum": ["user", "assistant"], "description": "Who sent the message."},
          "content": {"type": "string", "description": "Message content."},
          "created_at": {"type": "string", "format": "date-time"},
          "processed_at": {"type": "string", "format": "date-time"}
        },
        "required": ["id", "role", "content", "created_at"]
      },
      "ClaudiaChatResponse": {
        "type": "object",
        "description": "Response when creating a chat.",
        "properties": {
          "message": {"type": "string", "description": "Human-readable status message."},
          "repo": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "name": {"type": "string"},
              "full_name": {"type": "string"}
            }
          },
          "chat": {"$ref": "#/components/schemas/ClaudiaChatSummary"}
        },
        "required": ["message", "repo", "chat"]
      },
      "ClaudiaChatsResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "count": {"type": "integer"},
          "chats": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/ClaudiaChatSummary"}
          }
        },
        "required": ["message", "count", "chats"]
      },
      "ClaudiaChatDetailsResponse": {
        "type": "object",
        "description": "Full chat details with messages.",
        "properties": {
          "message": {"type": "string"},
          "chat": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "repo_id": {"type": "string"},
              "title": {"type": "string"},
              "status": {"type": "string"},
              "queue_position": {"type": "integer"},
              "message_count": {"type": "integer"},
              "created_at": {"type": "string", "format": "date-time"},
              "updated_at": {"type": "string", "format": "date-time"},
              "prompt_id": {"type": "string"},
              "messages": {
                "type": "array",
                "items": {"$ref": "#/components/schemas/ClaudiaChatMessage"}
              }
            }
          }
        },
        "required": ["message", "chat"]
      },
      "ClaudiaMessageResponse": {
        "type": "object",
        "description": "Response after sending a message.",
        "properties": {
          "message": {"type": "string"},
          "chat_message": {"$ref": "#/components/schemas/ClaudiaChatMessage"}
        },
        "required": ["message", "chat_message"]
      },
      "ClaudiaChatEndResponse": {
        "type": "object",
        "description": "Response when ending a chat.",
        "properties": {
          "message": {"type": "string"},
          "chat": {"$ref": "#/components/schemas/ClaudiaChatSummary"}
        },
        "required": ["message", "chat"]
      },
      "ClaudiaPromptSummary": {
        "type": "object",
        "description": "Summary of a prompt.",
        "properties": {
          "id": {"type": "string"},
          "title": {"type": "string"},
          "status": {"type": "string", "enum": ["draft", "ready", "archived"]},
          "description": {"type": "string"},
          "blocked_by": {"type": "string"},
          "tags": {"type": "array", "items": {"type": "string"}},
          "created_at": {"type": "string", "format": "date-time"}
        },
        "required": ["id", "title", "status"]
      },
      "ClaudiaPromptsResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "count": {"type": "integer"},
          "prompts": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/ClaudiaPromptSummary"}
          }
        },
        "required": ["message", "count", "prompts"]
      },
      "ClaudiaPromptDetailsResponse": {
        "type": "object",
        "description": "Full prompt details including content.",
        "properties": {
          "message": {"type": "string"},
          "prompt": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "title": {"type": "string"},
              "status": {"type": "string"},
              "description": {"type": "string"},
              "content": {"type": "string"},
              "blocked_by": {"type": "string"},
              "tags": {"type": "array", "items": {"type": "string"}},
              "created_at": {"type": "string", "format": "date-time"}
            }
          }
        },
        "required": ["message", "prompt"]
      },
      "ClaudiaPromptGenerationQueued": {
        "type": "object",
        "description": "Response when prompt generation is queued.",
        "properties": {
          "message": {"type": "string"},
          "queue_item_id": {"type": "string"},
          "queue_position": {"type": "integer"},
          "chat_id": {"type": "string"}
        },
        "required": ["message", "queue_item_id", "queue_position"]
      },
      "ClaudiaExecutionQueued": {
        "type": "object",
        "description": "Response when prompt execution is queued.",
        "properties": {
          "message": {"type": "string"},
          "queue_item_id": {"type": "string"},
          "queue_position": {"type": "integer"},
          "prompt_id": {"type": "string"}
        },
        "required": ["message", "queue_item_id", "queue_position"]
      },
      "ClaudiaExecutionsResponse": {
        "type": "object",
        "properties": {
          "message": {"type": "string"},
          "count": {"type": "integer"},
          "executions": {"type": "array", "items": {"type": "object"}}
        },
        "required": ["message", "count", "executions"]
      },
      "ClaudiaExecutionResponse": {
        "type": "object",
        "description": "Full execution details.",
        "properties": {
          "message": {"type": "string"},
          "execution": {"type": "object"}
        },
        "required": ["message", "execution"]
      },
      "ClaudiaQueueItem": {
        "type": "object",
        "properties": {
          "id": {"type": "string"},
          "type": {"type": "string", "enum": ["prd_task", "chat", "prompt_generation", "prompt_execution"]},
          "item_id": {"type": "string"},
          "title": {"type": "string"},
          "position": {"type": "integer"},
          "status": {"type": "string", "enum": ["pending", "active", "completed", "failed", "cancelled"]},
          "created_at": {"type": "string", "format": "date-time"},
          "started_at": {"type": "string", "format": "date-time"}
        }
      },
      "ClaudiaQueueResponse": {
        "type": "object",
        "description": "Queue status for a repository.",
        "properties": {
          "message": {"type": "string"},
          "queue": {
            "type": "object",
            "properties": {
              "depth": {"type": "integer", "description": "Number of pending items."},
              "estimated_wait_minutes": {"type": "number"},
              "active_item": {"$ref": "#/components/schemas/ClaudiaQueueItem"},
              "items": {
                "type": "array",
                "items": {"$ref": "#/components/schemas/ClaudiaQueueItem"}
              }
            }
          }
        },
        "required": ["message", "queue"]
      },
      "AndroidPhoneUIElement": {
        "type": "object",
        "description": "A parsed UI element from the Android screen.",
        "properties": {
          "text": {"type": "string", "description": "Visible text of the element."},
          "content_desc": {"type": "string", "description": "Accessibility content description."},
          "resource_id": {"type": "string", "description": "Android resource ID (package prefix stripped)."},
          "center_x": {"type": "integer", "description": "X coordinate of element center."},
          "center_y": {"type": "integer", "description": "Y coordinate of element center."},
          "bounds": {
            "type": "object",
            "properties": {
              "left": {"type": "integer"},
              "top": {"type": "integer"},
              "right": {"type": "integer"},
              "bottom": {"type": "integer"}
            }
          },
          "clickable": {"type": "boolean"},
          "class_name": {"type": "string", "description": "Android view class name."}
        }
      },
      "AndroidPhoneScreenResponse": {
        "type": "object",
        "description": "Android phone screen state for LLM-in-the-loop automation.",
        "properties": {
          "screenshot_base64": {"type": "string", "description": "Base64-encoded PNG screenshot."},
          "xml": {"type": "string", "description": "Raw accessibility XML from uiautomator dump."},
          "clickable_elements": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/AndroidPhoneUIElement"},
            "description": "Parsed UI elements with coordinates for interaction."
          },
          "element_count": {"type": "integer", "description": "Total number of UI elements on screen."},
          "message": {"type": "string"}
        },
        "required": ["screenshot_base64", "xml", "clickable_elements", "element_count"]
      },
      "AndroidPhoneHealthResponse": {
        "type": "object",
        "description": "Android phone health check result.",
        "properties": {
          "connected": {"type": "boolean", "description": "Whether the device is reachable."},
          "device_model": {"type": "string", "description": "Device model name (e.g., 'Pixel 9 Pro')."},
          "android_version": {"type": "string", "description": "Android OS version (e.g., '15')."},
          "battery_level": {"type": "integer", "description": "Battery percentage (0-100)."},
          "wifi_ssid": {"type": "string", "description": "Current WiFi network name."},
          "error": {"type": "string", "description": "Error message if device not reachable."}
        },
        "required": ["connected"]
      },
      "AndroidPhoneThermostatSetRangeResponse": {
        "type": "object",
        "description": "Result of thermostat set range operation.",
        "properties": {
          "success": {"type": "boolean", "description": "Whether the operation completed successfully."},
          "final_low_temp": {"type": "integer", "description": "Confirmed low temperature set (F)."},
          "final_high_temp": {"type": "integer", "description": "Confirmed high temperature set (F)."},
          "mode": {"type": "string", "description": "Thermostat mode (heat, cool, heat_cool, eco, off)."},
          "steps_taken": {"type": "integer", "description": "Number of automation steps executed."},
          "tokens_used": {"type": "integer", "description": "Total LLM tokens consumed."},
          "estimated_cost": {"type": "number", "description": "Estimated cost in USD."},
          "message": {"type": "string"},
          "error": {"type": "string", "description": "Error message if operation failed."}
        },
        "required": ["success", "steps_taken", "tokens_used"]
      },
      "AndroidPhoneDoTaskResponse": {
        "type": "object",
        "description": "Result of goal-based Android phone automation.",
        "properties": {
          "success": {"type": "boolean", "description": "Whether the task completed successfully."},
          "result": {"type": "string", "description": "Description of what was accomplished."},
          "extracted_data": {"type": "object", "description": "Any data extracted from the phone (varies by task)."},
          "steps_taken": {"type": "integer", "description": "Number of automation steps executed."},
          "tokens_used": {"type": "integer", "description": "Total LLM tokens consumed."},
          "estimated_cost": {"type": "number", "description": "Estimated cost in USD."},
          "error": {"type": "string", "description": "Error message if task failed."}
        },
        "required": ["success", "steps_taken", "tokens_used"]
      },
      "AndroidPhoneThermostatGetStatusResponse": {
        "type": "object",
        "description": "Current thermostat status from Google Home.",
        "properties": {
          "success": {"type": "boolean", "description": "Whether the operation completed successfully."},
          "current_temp": {"type": "integer", "description": "Current ambient temperature (F)."},
          "target_low": {"type": "integer", "description": "Heat setpoint (F)."},
          "target_high": {"type": "integer", "description": "Cool setpoint (F)."},
          "mode": {"type": "string", "description": "Current mode: heat, cool, heat_cool, eco, off."},
          "humidity": {"type": "integer", "description": "Humidity percentage (null if not available)."},
          "status": {"type": "string", "description": "Current status: heating, cooling, idle, off."},
          "steps_taken": {"type": "integer", "description": "Number of automation steps executed."},
          "tokens_used": {"type": "integer", "description": "Total LLM tokens consumed."},
          "estimated_cost": {"type": "number", "description": "Estimated cost in USD."},
          "error": {"type": "string", "description": "Error message if operation failed."}
        },
        "required": ["success", "steps_taken", "tokens_used"]
      },
      "AndroidPhoneAuditResponse": {
        "type": "object",
        "description": "Audit log entries for Android phone actions.",
        "properties": {
          "entries": {"type": "array", "items": {"type": "object"}, "description": "List of audit log entries."},
          "count": {"type": "integer", "description": "Number of entries returned."},
          "stats": {"type": "object", "description": "Aggregate statistics about actions."}
        },
        "required": ["entries", "count"]
      },
      "AndroidPhoneMaintenanceResponse": {
        "type": "object",
        "description": "Generic maintenance operation result.",
        "properties": {
          "success": {"type": "boolean", "description": "Whether the operation completed."},
          "message": {"type": "string", "description": "Status message."},
          "error": {"type": "string", "description": "Error message if failed."},
          "requires_llm_automation": {"type": "boolean", "description": "Whether LLM automation is needed to complete."},
          "workflow": {"type": "array", "items": {"type": "string"}, "description": "Steps to complete the operation."}
        },
        "required": ["success", "message"]
      },
      "AndroidPhoneSecurityResponse": {
        "type": "object",
        "description": "Security patch information.",
        "properties": {
          "success": {"type": "boolean"},
          "message": {"type": "string"},
          "security_patch": {"type": "string", "description": "Security patch date (e.g., 2025-01-05)."},
          "android_version": {"type": "string", "description": "Android OS version."},
          "build_date": {"type": "string", "description": "Device build date."},
          "error": {"type": "string"}
        },
        "required": ["success"]
      },
      "AndroidPhoneStorageResponse": {
        "type": "object",
        "description": "Device storage information.",
        "properties": {
          "success": {"type": "boolean"},
          "message": {"type": "string"},
          "used_percent": {"type": "number", "description": "Percentage of storage used."},
          "free_percent": {"type": "number", "description": "Percentage of storage free."},
          "total_formatted": {"type": "string", "description": "Total storage (human readable)."},
          "used_formatted": {"type": "string", "description": "Used storage (human readable)."},
          "free_formatted": {"type": "string", "description": "Free storage (human readable)."},
          "error": {"type": "string"}
        },
        "required": ["success"]
      },
      "AndroidPhoneBatteryResponse": {
        "type": "object",
        "description": "Battery health information.",
        "properties": {
          "success": {"type": "boolean"},
          "message": {"type": "string"},
          "level_percent": {"type": "integer", "description": "Battery level (0-100)."},
          "status": {"type": "string", "description": "Charging status."},
          "health": {"type": "string", "description": "Battery health status."},
          "temperature": {"type": "string", "description": "Battery temperature."},
          "plugged": {"type": "string", "description": "Power source if plugged in."},
          "error": {"type": "string"}
        },
        "required": ["success"]
      }
    },
    "securitySchemes": {
      "ActionsApiKey": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-Key",
        "description": "API key for authentication."
      }
    }
  },
  "security": [{"ActionsApiKey": []}]
}

