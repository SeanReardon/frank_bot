{
  "id": "sean-voice-and-jorb-discovery",
  "title": "Sean Voice Capture & In-Flight Jorb Discovery",
  "description": "Analyze historical Telegram messages to capture Sean's writing style, detect Sean's direct interventions, and auto-create catch-up jorbs for in-flight tasks",
  "authors": [
    {
      "name": "Sean Reardon",
      "type": "human"
    },
    {
      "name": "Claude",
      "type": "model"
    }
  ],
  "createdAt": "2026-01-31T20:30:00Z",
  "status": "ready",
  "tags": [
    "telegram",
    "personality",
    "jorbs",
    "style-guide"
  ],
  "content": "# Sean Voice Capture & In-Flight Jorb Discovery\n\n## Context\n\nFrank_bot is a personal AI assistant that communicates with Magic (a concierge service) via Telegram on Sean's behalf. The system uses Telethon for Telegram integration and has a \"jorb\" (long-running task) system with a switchboard that routes incoming messages to the appropriate jorb.\n\n**The problem**: Frank_bot sounds too formal and robotic compared to how Sean actually writes. Additionally, frank_bot is \"coming into a play that's already being performed\" \u2014 Sean has an ongoing relationship with Magic spanning 22+ months of history, and some conversations may be in-flight that frank_bot doesn't know about.\n\n## Data Available\n\n- **Telethon can access ~4000+ messages** going back to April 2024\n- **807 authentic Sean messages** (outgoing) from before frank_bot started operating (pre-January 2026)\n- **70+ frank_bot messages** from January 2026 onward\n- Clear stylistic contrast between Sean's casual voice and frank_bot's formal voice\n\n### Style Contrast Examples\n\n**Sean's authentic voice**:\n- \"Yep!\", \"Mk\", \"thank you!\"\n- \"Oh what about those dresses we bought a week or two back? What's the status?\"\n- \"Max of $1k I suppose\"\n- \"Gotta be the casmo\"\n- \"Yes do those\"\n- \"on omu.way\" (typos left in)\n\n**Frank_bot's current voice**:\n- \"Thanks, Magic \u2014 confirmed and aligned. \ud83d\ude4f\"\n- \"For the **12:00 PM CST update**, please send...\"\n- Uses markdown formatting, emojis, verbose confirmations\n\n## Work Streams\n\n### Stream A: SEAN.md Generation\n\n**Goal**: Create a ~5 page document (`SEAN.md`) that captures Sean's writing style in declarative, prescriptive language written in neutral third person. This document will guide frank_bot (and future personalities) on how to sound like Sean.\n\n**Requirements**:\n\n1. **Build a style analysis function** in frank_bot that:\n   - Fetches ALL historical outgoing messages from the Magic conversation via Telethon (no artificial limit)\n   - Filters to messages before January 2026 (Sean's authentic voice, not frank_bot)\n   - Analyzes patterns across these categories:\n     - **Hedging**: How Sean expresses uncertainty (\"I suppose\", \"maybe?\", \"Like a week long...\")\n     - **Disagreement**: How Sean pushes back or declines\n     - **Pausing/Resuming**: How Sean puts things on hold or picks them back up\n     - **Revision**: How Sean changes direction mid-stream (\"actually\", \"oh wait\", \"oh what about\")\n     - **Acknowledgment**: How Sean confirms receipt or thanks (\"Yep\", \"thank you!\", \"Mk\")\n     - **Action requests**: How Sean asks for things to be done\n     - **Follow-ups**: How Sean checks on status\n     - **Tone markers**: Punctuation patterns, capitalization, typo tolerance\n   - Generates SEAN.md as output\n\n2. **SEAN.md structure** should include:\n   - Executive summary of Sean's communication style\n   - Detailed sections for each pattern category with examples\n   - Anti-patterns (what NOT to do \u2014 e.g., no emojis, no markdown formatting, no verbose confirmations)\n   - Sample transformations: \"Instead of X, write Y\"\n\n3. **Delivery mechanism**:\n   - After generating SEAN.md, send it to Sean (@SeanReardon) via frank_bot's Telegram\n   - Sean will add it to the repo manually\n   - Create a new personality file `personalities/sean-voice.json` that references SEAN.md patterns\n\n4. **Integration with jorb sessions**:\n   - Jorbs using the `sean-voice` personality should produce messages matching Sean's authentic style\n\n### Stream B: Detecting Sean's Direct Messages\n\n**Goal**: When Sean sends a message directly in the Telegram thread (not via frank_bot), frank_bot should recognize this and treat it as guidance on how to proceed.\n\n**The problem**:\n- Telethon's event listener currently skips outgoing messages (line 226 in `telegram_client.py`: `if event.out: return`)\n- But Sean may send messages directly that frank_bot should be aware of\n- These messages represent \"Sean wishes we had said this\" \u2014 valuable signal for the jorb\n\n**Requirements**:\n\n1. **Modify Telegram listener** to also process outgoing messages, but with special handling:\n   - When an outgoing message is detected, check if it exists in `jorb_messages` table (by timestamp proximity and content similarity)\n   - If found in jorb_messages \u2192 it was sent by frank_bot, ignore\n   - If NOT found \u2192 Sean sent it directly, process as special event\n\n2. **Special handling for Sean's direct messages**:\n   - Route through switchboard with a new flag: `is_human_intervention: true`\n   - Switchboard should still identify which jorb this relates to\n   - If matched to a jorb, store the message with `direction: \"outbound\"` and `sender: \"sean_direct\"` (or similar marker)\n   - The jorb session should receive context that \"Sean intervened directly with this message\"\n\n3. **Jorb session behavior** when Sean intervenes:\n   - Don't respond immediately (Sean already said something)\n   - Update progress notes: \"Sean sent directly: [message content]\"\n   - Learn from Sean's phrasing for future responses\n   - If Sean's message seems to close or resolve something, consider updating jorb status\n\n### Stream C: In-Flight Jorb Discovery\n\n**Goal**: When Magic sends a message about something Sean was handling before frank_bot existed, automatically create a \"catch-up jorb\" and ask Magic for context.\n\n**The scenario**:\n- Magic sends: \"Just following up on the Tucson arrangements we discussed last month\"\n- No matching jorb exists (this predates frank_bot)\n- Switchboard returns `jorb_id: null` with `might_be_new_jorb: true`\n- Sender is Magic (a known, trusted contact)\n\n**Requirements**:\n\n1. **Enhance post-routing logic** in `agent_runner.py`:\n   - If routing returns `jorb_id: null` AND sender is a known contact from any jorb (like `@MagicConciergeBot`) AND `might_be_new_jorb: true`:\n     - Don't just drop the message\n     - Create a new \"catch-up jorb\" automatically\n\n2. **Catch-up jorb creation**:\n   - Name: \"Catch-up: [first 30 chars of message]\"\n   - Status: \"running\"\n   - Plan: \"Recover context for an in-flight task that predates frank_bot. Original message: [content]\"\n   - Contact: The sender\n   - Personality: `sean-voice` (use Sean's authentic style for this delicate situation)\n\n3. **First action for catch-up jorb**:\n   - Send a message like: \"So sorry, I've lost track of this thread \u2014 can you bring me up to speed on where we left off?\"\n   - Store Magic's response as the first inbound message\n   - After receiving context, update the jorb plan with learned details\n\n4. **Distinguish from spam**:\n   - Only create catch-up jorbs for senders who are contacts in OTHER jorbs (trusted senders)\n   - If sender is completely unknown, flag for human review instead\n\n## File Locations Reference\n\n- Telegram client: `services/telegram_client.py`\n- Switchboard: `services/switchboard.py`\n- Jorb session: `services/jorb_session.py`\n- Agent runner: `services/agent_runner.py`\n- Jorb storage: `services/jorb_storage.py`\n- Telegram jorb router: `services/telegram_jorb_router.py`\n- Personalities: `personalities/*.json`\n- Personality loader: `services/personality_loader.py`\n- Prompts: `prompts/`\n\n## Acceptance Criteria Summary\n\n### Stream A (SEAN.md)\n- Function exists that analyzes historical Telegram messages\n- Function filters to outgoing messages before 2026-01-01\n- SEAN.md is generated with all specified sections\n- SEAN.md is sent to @SeanReardon via Telegram\n- `sean-voice` personality file is created\n- Jorbs using `sean-voice` produce messages matching Sean's style\n\n### Stream B (Sean's Direct Messages)\n- Telegram listener processes outgoing messages\n- Outgoing messages are checked against jorb_messages table\n- Untracked outgoing messages are flagged as `is_human_intervention`\n- Switchboard routes human interventions appropriately\n- Jorb sessions record and learn from Sean's direct messages\n\n### Stream C (In-Flight Jorb Discovery)\n- Agent runner detects unmatched messages from trusted senders\n- Catch-up jorbs are created automatically\n- First message asks Magic for context\n- Catch-up jorbs use `sean-voice` personality\n- Unknown senders are flagged for review, not auto-jorbed\n\n## Dependencies\n\n- Stream A should complete first (SEAN.md and sean-voice personality needed by Stream C)\n- Stream B and C can proceed in parallel after Stream A\n- All streams depend on existing Telethon, switchboard, and jorb infrastructure\n\n## Notes\n\n- The Magic contact is `@MagicConciergeBot` in Telegram\n- Sean's Telegram handle is `@SeanReardon`\n- Frank_bot has been operating since approximately January 2026\n- Historical message analysis should be a one-time generation, but could be re-run periodically to refine SEAN.md",
  "executions": [
    {
      "executedAt": "2026-01-31T21:53:10.917324Z",
      "model": "claude-opus",
      "prdIds": [
        "frank_bot-00074",
        "frank_bot-00075",
        "frank_bot-00076",
        "frank_bot-00077",
        "frank_bot-00078",
        "frank_bot-00079",
        "frank_bot-00080",
        "frank_bot-00081",
        "frank_bot-00082",
        "frank_bot-00083",
        "frank_bot-00084",
        "frank_bot-00085",
        "frank_bot-00086",
        "frank_bot-00087",
        "frank_bot-00088",
        "frank_bot-00089",
        "frank_bot-00090"
      ],
      "tokensUsed": 5626
    }
  ]
}
